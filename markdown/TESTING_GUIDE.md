# 🧪 管理模块测试指南

## 快速开始

### 1. 启动项目
```bash
cd venue-management-system
npm run dev
```

访问: http://localhost:5173

### 2. 使用管理员账号登录
- 用户名: `admin`
- 密码: 任意（例如：`123456`）

---

## 📍 场地管理测试

### 进入场地管理页面
登录后，点击侧边栏的 **"场地管理"** 菜单项。

### ✅ 测试 1: 查看场地列表
**预期结果**: 
- 应该看到一个表格，显示 4 个预置场地
- 表格包含：ID、场地名称、位置、容量、状态、操作列
- 状态列使用不同颜色的标签：
  - 绿色标签 = "开放预约"
  - 橙色标签 = "维修中"

### ✅ 测试 2: 新增场地
**操作步骤**:
1. 点击右上角的 **"新增场地"** 按钮
2. 对话框弹出，标题为 "新增场地"
3. 填写表单：
   - 场地名称: `测试会议室`
   - 位置: `D栋2楼`
   - 容量: `50`
   - 状态: 选择 `开放预约`
4. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "新增成功"
- 对话框关闭
- 表格中新增一行，ID 为 5
- 数据正确显示

### ✅ 测试 3: 表单验证
**操作步骤**:
1. 点击 **"新增场地"** 按钮
2. 不填写任何内容
3. 直接点击 **"确认"** 按钮

**预期结果**:
- 表单字段显示红色错误提示
- "场地名称" 显示 "请输入场地名称"
- "位置" 显示 "请输入位置"
- 对话框不会关闭

### ✅ 测试 4: 编辑场地
**操作步骤**:
1. 找到 "大学生活动中心" 这一行
2. 点击该行的 **"编辑"** 按钮
3. 对话框弹出，标题为 "编辑场地"
4. 表单已自动填充该场地的数据
5. 修改容量为 `250`
6. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "编辑成功"
- 对话框关闭
- 表格中 "大学生活动中心" 的容量更新为 250

### ✅ 测试 5: 删除场地
**操作步骤**:
1. 找到 "多功能会议室" 这一行
2. 点击该行的 **"删除"** 按钮
3. 弹出确认对话框，询问 "是否确认删除场地"多功能会议室"？"
4. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "删除成功"
- 表格中 "多功能会议室" 这一行消失
- 剩余 3 行数据

### ✅ 测试 6: 取消删除
**操作步骤**:
1. 点击某行的 **"删除"** 按钮
2. 在确认对话框中点击 **"取消"** 按钮

**预期结果**:
- 对话框关闭
- 数据没有被删除
- 没有任何提示消息

---

## 📦 物资管理测试

### 进入物资管理页面
点击侧边栏的 **"物资管理"** 菜单项。

### ✅ 测试 1: 查看物资列表
**预期结果**: 
- 应该看到一个表格，显示 6 个预置物资
- 表格包含：ID、物资名称、分类、总库存、操作列
- 库存列使用不同颜色的标签：
  - 绿色 = 库存 > 50 (例如：折叠椅 200)
  - 橙色 = 库存 20-50 (例如：LED舞台灯 30)
  - 红色 = 库存 < 20 (例如：无线麦克风 15)

### ✅ 测试 2: 新增物资
**操作步骤**:
1. 点击右上角的 **"新增物资"** 按钮
2. 对话框弹出，标题为 "新增物资"
3. 填写表单：
   - 物资名称: `白板`
   - 分类: 选择 `其他`
   - 总库存: `10`
4. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "新增成功"
- 对话框关闭
- 表格中新增一行，ID 为 7
- 库存显示为红色标签（因为 < 20）

### ✅ 测试 3: 测试分类下拉框
**操作步骤**:
1. 点击 **"新增物资"** 按钮
2. 点击 "分类" 下拉框

**预期结果**:
- 下拉框展开，显示 5 个选项：
  - 桌椅类
  - 音响设备
  - 灯光设备
  - 装饰用品
  - 其他

### ✅ 测试 4: 编辑物资
**操作步骤**:
1. 找到 "折叠椅" 这一行
2. 点击该行的 **"编辑"** 按钮
3. 对话框弹出，标题为 "编辑物资"
4. 表单已自动填充：
   - 物资名称: `折叠椅`
   - 分类: `桌椅类`
   - 总库存: `200`
5. 修改总库存为 `180`
6. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "编辑成功"
- 对话框关闭
- 表格中 "折叠椅" 的总库存更新为 180
- 标签颜色仍为绿色（因为 > 50）

### ✅ 测试 5: 删除物资
**操作步骤**:
1. 找到 "投影仪" 这一行
2. 点击该行的 **"删除"** 按钮
3. 弹出确认对话框
4. 点击 **"确认"** 按钮

**预期结果**:
- 显示绿色提示 "删除成功"
- 表格中 "投影仪" 这一行消失
- 剩余 5 行数据

### ✅ 测试 6: 库存数量限制
**操作步骤**:
1. 点击 **"新增物资"** 按钮
2. 在 "总库存" 输入框中：
   - 尝试输入负数
   - 尝试使用减号按钮

**预期结果**:
- 无法输入负数
- 减号按钮在 0 时被禁用
- 最小值为 0

---

## 🔐 权限控制测试

### ✅ 测试 1: 非管理员无法访问
**操作步骤**:
1. 退出登录（点击右上角头像 → 退出登录）
2. 使用 `reviewer` 账号登录（密码任意）
3. 观察侧边栏菜单

**预期结果**:
- 侧边栏 **不显示** "场地管理" 和 "物资管理" 菜单项
- 只显示 "首页" 和 "待我审批"

### ✅ 测试 2: 直接访问 URL 被拦截
**操作步骤**:
1. 保持 `reviewer` 账号登录状态
2. 在浏览器地址栏输入: `http://localhost:5173/manage/venues`
3. 按回车

**预期结果**:
- 被自动重定向到 `/403` 页面
- 显示 "403 - 抱歉，您没有权限访问此页面"

### ✅ 测试 3: 普通用户也无法访问
**操作步骤**:
1. 退出登录
2. 使用任意用户名登录（例如：`zhangsan`）
3. 尝试访问 `/manage/materials`

**预期结果**:
- 被重定向到 403 页面
- 侧边栏不显示管理菜单

---

## 🎯 综合测试场景

### 场景 1: 完整的场地管理流程
1. 以 admin 登录
2. 进入场地管理
3. 新增一个场地 "小型研讨室"
4. 编辑该场地，修改状态为 "维修中"
5. 观察状态标签变为橙色
6. 删除该场地
7. 确认列表恢复原状

### 场景 2: 完整的物资管理流程
1. 进入物资管理
2. 新增物资 "音响线材"，分类 "音响设备"，库存 5
3. 观察库存标签为红色（< 20）
4. 编辑该物资，将库存改为 100
5. 观察库存标签变为绿色（> 50）
6. 删除该物资

### 场景 3: 数据持久性测试
1. 在场地管理中新增一个场地
2. 切换到物资管理页面
3. 再切换回场地管理
4. 确认刚才新增的场地仍然存在

**注意**: 刷新页面后 Mock 数据会重置！

---

## 🐛 常见问题排查

### Q1: 点击"新增"按钮没有反应？
**检查**:
- 打开浏览器控制台 (F12)
- 查看是否有 JavaScript 错误
- 确认 Element Plus 组件正确加载

### Q2: 表单提交后数据没有更新？
**检查**:
- 确认表单验证通过（没有红色错误提示）
- 查看控制台是否有错误信息
- 确认点击的是 "确认" 按钮而不是 "取消"

### Q3: 删除后数据又出现了？
**原因**: 
- 刷新页面会重置 Mock 数据
- 这是正常现象，因为数据只存在内存中

### Q4: 侧边栏看不到管理菜单？
**检查**:
- 确认使用的是 `admin` 账号登录
- 检查路由配置中的 `roles` 设置
- 尝试退出重新登录

---

## 📊 测试检查清单

### 场地管理
- [ ] 列表正确显示 4 个场地
- [ ] 状态标签颜色正确
- [ ] 新增功能正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 表单验证生效
- [ ] 取消操作正常
- [ ] 成功提示显示

### 物资管理
- [ ] 列表正确显示 6 个物资
- [ ] 库存标签颜色正确（红/橙/绿）
- [ ] 新增功能正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 分类下拉框正常
- [ ] 库存数量限制生效
- [ ] 成功提示显示

### 权限控制
- [ ] admin 可以访问两个管理页面
- [ ] reviewer 无法访问管理页面
- [ ] 普通用户无法访问管理页面
- [ ] 直接访问 URL 被拦截
- [ ] 侧边栏菜单正确过滤

---

## 🎉 测试完成

如果以上所有测试都通过，说明管理模块功能完全正常！

**下一步**: 可以开始开发其他角色的功能模块了。

